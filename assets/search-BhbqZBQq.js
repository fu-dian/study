import{A as e,C as t,D as n,S as r,T as i,_ as a,a as o,b as s,c,g as l,h as u,j as d,l as f,m as p,n as m,o as h,r as g,v as _}from"./index-Che1PTwn.js";import{A as v,C as y,D as ee,E as b,F as x,M as S,O as te,P as C,a as ne,b as w,d as T,f as E,k as D,m as O,o as k,w as A,y as j}from"./icon-5q6F63b3.js";import{a as M,c as N,i as P,n as F,o as I,r as L,s as R,t as z}from"./OIP-C (3)-C0kLbpOm.js";function B(e,t){return e>t?`horizontal`:t>e?`vertical`:``}function re(){let e=d(0),t=d(0),n=d(0),r=d(0),i=d(0),a=d(0),o=d(``),s=d(!0),c=()=>o.value===`vertical`,l=()=>o.value===`horizontal`,u=()=>{n.value=0,r.value=0,i.value=0,a.value=0,o.value=``,s.value=!0};return{move:c=>{let l=c.touches[0];n.value=(l.clientX<0?0:l.clientX)-e.value,r.value=l.clientY-t.value,i.value=Math.abs(n.value),a.value=Math.abs(r.value),(!o.value||i.value<10&&a.value<10)&&(o.value=B(i.value,a.value)),s.value&&(i.value>5||a.value>5)&&(s.value=!1)},start:n=>{u(),e.value=n.touches[0].clientX,t.value=n.touches[0].clientY},reset:u,startX:e,startY:t,deltaX:n,deltaY:r,offsetX:i,offsetY:a,direction:o,isVertical:c,isHorizontal:l,isTap:s}}var[V,H]=E(`swipe`),U={loop:x,width:C,height:C,vertical:Boolean,autoplay:S(0),duration:S(500),touchable:x,lazyRender:Boolean,initialSwipe:S(0),indicatorColor:String,showIndicators:x,stopPropagation:x},W=Symbol(V),G=f({name:V,props:U,emits:[`change`,`dragStart`,`dragEnd`],setup(t,{emit:n,slots:r}){let o=d(),s=d(),f=e({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),m=!1,h=re(),{children:v,linkChildren:x}=ee(W),S=g(()=>v.length),C=g(()=>f[t.vertical?`height`:`width`]),T=g(()=>t.vertical?h.deltaY.value:h.deltaX.value),E=g(()=>f.rect?(t.vertical?f.rect.height:f.rect.width)-C.value*S.value:0),k=g(()=>C.value?Math.ceil(Math.abs(E.value)/C.value):S.value),M=g(()=>S.value*C.value),P=g(()=>(f.active+S.value)%S.value),F=g(()=>{let e=t.vertical?`vertical`:`horizontal`;return h.direction.value===e}),I=g(()=>{let e={transitionDuration:`${f.swiping?0:t.duration}ms`,transform:`translate${t.vertical?`Y`:`X`}(${+f.offset.toFixed(2)}px)`};if(C.value){let n=t.vertical?`height`:`width`,r=t.vertical?`width`:`height`;e[n]=`${M.value}px`,e[r]=t[r]?`${t[r]}px`:``}return e}),L=e=>{let{active:n}=f;return e?t.loop?O(n+e,-1,S.value):O(n+e,0,k.value):n},R=(e,n=0)=>{let r=e*C.value;t.loop||(r=Math.min(r,-E.value));let i=n-r;return t.loop||(i=O(i,E.value,0)),i},z=({pace:e=0,offset:r=0,emitChange:i})=>{if(S.value<=1)return;let{active:a}=f,o=L(e),s=R(o,r);if(t.loop){if(v[0]&&s!==E.value){let e=s<E.value;v[0].setOffset(e?M.value:0)}if(v[S.value-1]&&s!==0){let e=s>0;v[S.value-1].setOffset(e?-M.value:0)}}f.active=o,f.offset=s,i&&o!==a&&n(`change`,P.value)},B=()=>{f.swiping=!0,f.active<=-1?z({pace:S.value}):f.active>=S.value&&z({pace:-S.value})},V=()=>{B(),h.reset(),b(()=>{f.swiping=!1,z({pace:-1,emitChange:!0})})},U=()=>{B(),h.reset(),b(()=>{f.swiping=!1,z({pace:1,emitChange:!0})})},G,K=()=>clearTimeout(G),q=()=>{K(),+t.autoplay>0&&S.value>1&&(G=setTimeout(()=>{U(),q()},+t.autoplay))},J=(e=+t.initialSwipe)=>{if(!o.value)return;let n=()=>{if(!j(o)){let e={width:o.value.offsetWidth,height:o.value.offsetHeight};f.rect=e,f.width=+(t.width??e.width),f.height=+(t.height??e.height)}S.value&&(e=Math.min(S.value-1,e),e===-1&&(e=S.value-1)),f.active=e,f.swiping=!0,f.offset=R(e),v.forEach(e=>{e.setOffset(0)}),q()};j(o)?p().then(n):n()},Y=()=>J(f.active),X,Z=e=>{!t.touchable||e.touches.length>1||(h.start(e),m=!1,X=Date.now(),K(),B())},Q=e=>{t.touchable&&f.swiping&&(h.move(e),F.value&&(!t.loop&&(f.active===0&&T.value>0||f.active===S.value-1&&T.value<0)||(w(e,t.stopPropagation),z({offset:T.value}),m||=(n(`dragStart`,{index:P.value}),!0))))},$=()=>{if(!t.touchable||!f.swiping)return;let e=Date.now()-X,r=T.value/e;if((Math.abs(r)>.25||Math.abs(T.value)>C.value/2)&&F.value){let e=t.vertical?h.offsetY.value:h.offsetX.value,n=0;n=t.loop?e>0?T.value>0?-1:1:0:-Math[T.value>0?`ceil`:`floor`](T.value/C.value),z({pace:n,emitChange:!0})}else T.value&&z({pace:0});m=!1,f.swiping=!1,n(`dragEnd`,{index:P.value}),q()},ie=(e,n={})=>{B(),h.reset(),b(()=>{let r;r=t.loop&&e===S.value?f.active===0?0:e:e%S.value,n.immediate?b(()=>{f.swiping=!1}):f.swiping=!1,z({pace:r-f.active,emitChange:!0})})},ae=(e,n)=>{let r=n===P.value,i=r?{backgroundColor:t.indicatorColor}:void 0;return c(`i`,{style:i,class:H(`indicator`,{active:r})},null)},oe=()=>{if(r.indicator)return r.indicator({active:P.value,total:S.value});if(t.showIndicators&&S.value>1)return c(`div`,{class:H(`indicators`,{vertical:t.vertical})},[Array(S.value).fill(``).map(ae)])};return N({prev:V,next:U,state:f,resize:Y,swipeTo:ie}),x({size:C,props:t,count:S,activeIndicator:P}),i(()=>t.initialSwipe,e=>J(+e)),i(S,()=>J(f.active)),i(()=>t.autoplay,q),i([A,y,()=>t.width,()=>t.height],Y),i(D(),e=>{e===`visible`?q():K()}),_(J),u(()=>J(f.active)),ne(()=>J(f.active)),a(K),l(K),te(`touchmove`,Q,{target:s}),()=>c(`div`,{ref:o,class:H()},[c(`div`,{ref:s,style:I.value,class:H(`track`,{vertical:t.vertical}),onTouchstartPassive:Z,onTouchend:$,onTouchcancel:$},[r.default?.call(r)]),oe()])}}),K=k(G),[q,J]=E(`swipe-item`),Y=f({name:q,setup(t,{slots:n}){let r,i=e({offset:0,inited:!1,mounted:!1}),{parent:a,index:o}=v(W);if(!a)return;let s=g(()=>{let e={},{vertical:t}=a.props;return a.size.value&&(e[t?`height`:`width`]=`${a.size.value}px`),i.offset&&(e.transform=`translate${t?`Y`:`X`}(${i.offset}px)`),e}),l=g(()=>{let{loop:e,lazyRender:t}=a.props;if(!t||r)return!0;if(!i.mounted)return!1;let n=a.activeIndicator.value,s=a.count.value-1,c=n===0&&e?s:n-1,l=n===s&&e?0:n+1;return r=o.value===n||o.value===c||o.value===l,r});return _(()=>{p(()=>{i.mounted=!0})}),N({setOffset:e=>{i.offset=e}}),()=>c(`div`,{class:J(),style:s.value},[l.value?n.default?.call(n):null])}}),X=k(Y),Z={__name:`search`,setup(e){let i=d(``),a=d([{id:1,name:`三上悠亚`,url:M,num:[`SSNI-674`,`SSIS-604`,`SSIS-777`]},{id:2,name:`枫可怜`,url:P,num:[`IPZZ-281`,`IPX-398`,`IPX-352`]},{id:3,name:`濑户环奈`,url:L,num:[`SONE-798`,`SONE-842`,`SONE-892`]},{id:4,name:`明里紬`,url:F,num:[`IPX-730`,`IPX-991`,`IPX-618`]},{id:5,name:`神宫寺奈绪`,url:z,num:[`JUY-925`,`JUY-894`,`JUL-185C`]}]);return(e,l)=>{let u=I,d=t(`router-link`),f=R,p=X,g=K;return s(),h(m,null,[c(d,{to:`/detail`},{default:n(()=>[c(u,{class:`search`,modelValue:i.value,"onUpdate:modelValue":l[0]||=e=>i.value=e,placeholder:`请输入搜索关键词`,"wrap-with-form":``,onSearch:e.sousuo},null,8,[`modelValue`,`onSearch`])]),_:1}),c(g,{autoplay:3e3,"lazy-render":``},{default:n(()=>[(s(!0),h(m,null,r(a.value,e=>(s(),o(p,{class:`swipe`,key:e},{default:n(()=>[c(f,{class:`swipe-image`,width:`90%`,height:`300px`,fit:`cover`,radius:`10px`,src:e.url},null,8,[`src`])]),_:2},1024))),128))]),_:1})],64)}}};export{Z as default};